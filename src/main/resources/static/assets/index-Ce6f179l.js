var Oe=Object.defineProperty;var Pe=(t,e,n)=>e in t?Oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var x=(t,e,n)=>Pe(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function A(){}function ye(t){return t()}function ie(){return Object.create(null)}function T(t){t.forEach(ye)}function ve(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ke(t){return Object.keys(t).length===0}function h(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode&&t.parentNode.removeChild(t)}function ne(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function O(){return U(" ")}function we(){return U("")}function N(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function V(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Se(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Ee(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.data!==e&&(t.data=e)}function E(t,e){t.value=e??""}function re(t,e,n){for(let l=0;l<t.options.length;l+=1){const o=t.options[l];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ue(t){const e=t.querySelector(":checked");return e&&e.__value}let M;function J(t){M=t}function Ne(){if(!M)throw new Error("Function called outside component initialization");return M}function Ve(t){Ne().$$.on_mount.push(t)}const I=[],ue=[];let D=[];const se=[],je=Promise.resolve();let te=!1;function Ae(){te||(te=!0,je.then(Ce))}function Z(t){D.push(t)}const ee=new Set;let F=0;function Ce(){if(F!==0)return;const t=M;do{try{for(;F<I.length;){const e=I[F];F++,J(e),Te(e.$$)}}catch(e){throw I.length=0,F=0,e}for(J(null),I.length=0,F=0;ue.length;)ue.pop()();for(let e=0;e<D.length;e+=1){const n=D[e];ee.has(n)||(ee.add(n),n())}D.length=0}while(I.length);for(;se.length;)se.pop()();te=!1,ee.clear(),J(t)}function Te(t){if(t.fragment!==null){t.update(),T(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}function qe(t){const e=[],n=[];D.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),D=e}const R=new Set;let q;function z(){q={r:0,c:[],p:q}}function K(){q.r||T(q.c),q=q.p}function S(t,e){t&&t.i&&(R.delete(t),t.i(e))}function j(t,e,n,l){if(t&&t.o){if(R.has(t))return;R.add(t),q.c.push(()=>{R.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function B(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function le(t){t&&t.c()}function G(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),Z(()=>{const i=t.$$.on_mount.map(ye).filter(ve);t.$$.on_destroy?t.$$.on_destroy.push(...i):T(i),t.$$.on_mount=[]}),o.forEach(Z)}function H(t,e){const n=t.$$;n.fragment!==null&&(qe(n.after_update),T(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Le(t,e){t.$$.dirty[0]===-1&&(I.push(t),Ae(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,n,l,o,i,r=null,s=[-1]){const a=M;J(t);const c=t.$$={fragment:null,ctx:[],props:i,update:A,not_equal:o,bound:ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ie(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(f,w,...v)=>{const b=v.length?v[0]:w;return c.ctx&&o(c.ctx[f],c.ctx[f]=b)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](b),u&&Le(t,f)),w}):[],c.update(),u=!0,T(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const f=Ee(e.target);c.fragment&&c.fragment.l(f),f.forEach($)}else c.fragment&&c.fragment.c();e.intro&&S(t.$$.fragment),G(t,e.target,e.anchor),Ce()}J(a)}class Y{constructor(){x(this,"$$");x(this,"$$set")}$destroy(){H(this,1),this.$destroy=A}$on(e,n){if(!ve(n))return A;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!ke(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Fe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Fe);function fe(t,e,n){const l=t.slice();return l[8]=e[n],l[9]=e,l[10]=n,l}function ce(t){let e,n,l=t[10]+1+"",o,i,r,s,a;function c(){t[6].call(r,t[10])}return{c(){e=g("label"),n=U("Option "),o=U(l),i=U(`:\r
        `),r=g("input"),V(r,"type","text"),V(r,"placeholder","Enter option "+(t[10]+1))},m(u,f){y(u,e,f),h(e,n),h(e,o),h(e,i),h(e,r),E(r,t[1][t[10]]),s||(a=N(r,"input",c),s=!0)},p(u,f){t=u,f&2&&r.value!==t[1][t[10]]&&E(r,t[1][t[10]])},d(u){u&&$(e),s=!1,a()}}}function Ie(t){let e,n,l,o,i,r,s,a,c,u,f,w,v,b,_,p,m,d=B(t[1]),P=[];for(let C=0;C<d.length;C+=1)P[C]=ce(fe(t,d,C));return{c(){e=g("main"),n=g("h2"),n.textContent="Create a New Poll",l=O(),o=g("label"),i=U(`Poll Question:\r
      `),r=g("input"),s=O();for(let C=0;C<P.length;C+=1)P[C].c();a=O(),c=g("button"),c.textContent="Add Option",u=O(),f=g("label"),w=U(`Valid Until:\r
      `),v=g("input"),b=O(),_=g("button"),_.textContent="Create Poll",V(r,"type","text"),V(r,"placeholder","Enter poll question"),V(v,"type","datetime-local")},m(C,L){y(C,e,L),h(e,n),h(e,l),h(e,o),h(o,i),h(o,r),E(r,t[0]),h(e,s);for(let k=0;k<P.length;k+=1)P[k]&&P[k].m(e,null);h(e,a),h(e,c),h(e,u),h(e,f),h(f,w),h(f,v),E(v,t[2]),h(e,b),h(e,_),p||(m=[N(r,"input",t[5]),N(c,"click",t[3]),N(v,"input",t[7]),N(_,"click",t[4])],p=!0)},p(C,[L]){if(L&1&&r.value!==C[0]&&E(r,C[0]),L&2){d=B(C[1]);let k;for(k=0;k<d.length;k+=1){const oe=fe(C,d,k);P[k]?P[k].p(oe,L):(P[k]=ce(oe),P[k].c(),P[k].m(e,a))}for(;k<P.length;k+=1)P[k].d(1);P.length=d.length}L&4&&E(v,C[2])},i:A,o:A,d(C){C&&$(e),ne(P,C),p=!1,T(m)}}}function De(t){return new Date(t).toISOString().replace("Z","Z")}function Be(t,e,n){let l="",o=[""],i="";function r(){n(1,o=[...o,""])}async function s(){const f=o.map(_=>({caption:_})),w=De(i);(await fetch("http://localhost:8080/polls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:l,options:f,validUntil:w})})).ok?(alert("Poll created successfully!"),n(0,l=""),n(1,o=[""]),n(2,i="")):alert("Failed to create poll")}function a(){l=this.value,n(0,l)}function c(f){o[f]=this.value,n(1,o)}function u(){i=this.value,n(2,i)}return[l,o,i,r,s,a,c,u]}class Je extends Y{constructor(e){super(),X(this,e,Be,Ie,Q,{})}}function Me(t){let e,n,l,o,i,r,s,a,c;return{c(){e=g("h2"),e.textContent="Create User",n=O(),l=g("input"),o=O(),i=g("input"),r=O(),s=g("button"),s.textContent="Register",V(l,"type","text"),V(l,"placeholder","Enter username"),V(i,"type","text"),V(i,"placeholder","Enter username")},m(u,f){y(u,e,f),y(u,n,f),y(u,l,f),E(l,t[0]),y(u,o,f),y(u,i,f),E(i,t[1]),y(u,r,f),y(u,s,f),a||(c=[N(l,"input",t[4]),N(i,"input",t[5]),N(s,"click",t[2])],a=!0)},p(u,[f]){f&1&&l.value!==u[0]&&E(l,u[0]),f&2&&i.value!==u[1]&&E(i,u[1])},i:A,o:A,d(u){u&&($(e),$(n),$(l),$(o),$(i),$(r),$(s)),a=!1,T(c)}}}function Re(t,e,n){let{onUserCreated:l}=e,o="",i="";async function r(){const c=await fetch("http://localhost:8080/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,email:i})});c.ok?(alert("User created successfully!"),l(o)):c.status===409?alert("User already exists."):alert("Failed to create user")}function s(){o=this.value,n(0,o)}function a(){i=this.value,n(1,i)}return t.$$set=c=>{"onUserCreated"in c&&n(3,l=c.onUserCreated)},[o,i,r,l,s,a]}class Ze extends Y{constructor(e){super(),X(this,e,Re,Me,Q,{onUserCreated:3})}}function ae(t,e,n){const l=t.slice();return l[8]=e[n],l[10]=n,l}function pe(t,e,n){const l=t.slice();return l[11]=e[n],l}function de(t){let e,n=t[11].question+"",l,o;return{c(){e=g("option"),l=U(n),e.__value=o=t[11],E(e,e.__value)},m(i,r){y(i,e,r),h(e,l)},p(i,r){r&1&&n!==(n=i[11].question+"")&&W(l,n),r&1&&o!==(o=i[11])&&(e.__value=o,E(e,e.__value))},d(i){i&&$(e)}}}function _e(t){let e,n=t[1].question+"",l,o,i,r=B(t[1].options),s=[];for(let a=0;a<r.length;a+=1)s[a]=he(ae(t,r,a));return{c(){e=g("h3"),l=U(n),o=O();for(let a=0;a<s.length;a+=1)s[a].c();i=we()},m(a,c){y(a,e,c),h(e,l),y(a,o,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,c);y(a,i,c)},p(a,c){if(c&2&&n!==(n=a[1].question+"")&&W(l,n),c&6){r=B(a[1].options);let u;for(u=0;u<r.length;u+=1){const f=ae(a,r,u);s[u]?s[u].p(f,c):(s[u]=he(f),s[u].c(),s[u].m(i.parentNode,i))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}},d(a){a&&($(e),$(o),$(i)),ne(s,a)}}}function he(t){let e,n,l,o=t[8].caption+"",i,r,s,a,c;return s=Se(t[7][0]),{c(){e=g("label"),n=g("input"),l=O(),i=U(o),r=O(),V(n,"type","radio"),V(n,"name","option"),n.__value=t[10],E(n,n.__value),s.p(n)},m(u,f){y(u,e,f),h(e,n),n.checked=n.__value===t[2],h(e,l),h(e,i),h(e,r),a||(c=N(n,"change",t[6]),a=!0)},p(u,f){f&6&&(n.checked=n.__value===u[2]),f&2&&o!==(o=u[8].caption+"")&&W(i,o)},d(u){u&&$(e),s.r(),a=!1,c()}}}function ze(t){let e,n,l,o,i,r,s,a,c,u,f,w,v=B(t[0]),b=[];for(let p=0;p<v.length;p+=1)b[p]=de(pe(t,v,p));let _=t[1]&&_e(t);return{c(){e=g("main"),n=g("h2"),n.textContent="Vote on a Poll",l=O(),o=g("label"),i=U(`Select a Poll:
    `),r=g("select"),s=g("option"),s.textContent="Select a poll";for(let p=0;p<b.length;p+=1)b[p].c();a=O(),_&&_.c(),c=O(),u=g("button"),u.textContent="Submit Vote",s.__value="",E(s,s.__value),s.disabled=!0,s.selected=!0,t[1]===void 0&&Z(()=>t[5].call(r))},m(p,m){y(p,e,m),h(e,n),h(e,l),h(e,o),h(o,i),h(o,r),h(r,s);for(let d=0;d<b.length;d+=1)b[d]&&b[d].m(r,null);re(r,t[1],!0),h(e,a),_&&_.m(e,null),h(e,c),h(e,u),f||(w=[N(r,"change",t[5]),N(u,"click",t[3])],f=!0)},p(p,[m]){if(m&1){v=B(p[0]);let d;for(d=0;d<v.length;d+=1){const P=pe(p,v,d);b[d]?b[d].p(P,m):(b[d]=de(P),b[d].c(),b[d].m(r,null))}for(;d<b.length;d+=1)b[d].d(1);b.length=v.length}m&3&&re(r,p[1]),p[1]?_?_.p(p,m):(_=_e(p),_.c(),_.m(e,c)):_&&(_.d(1),_=null)},i:A,o:A,d(p){p&&$(e),ne(b,p),_&&_.d(),f=!1,T(w)}}}function Ke(t,e,n){let{username:l=""}=e,o=[],i=null,r=null;Ve(async()=>{try{const f=await fetch("http://localhost:8080/polls");if(f.ok){const w=await f.json();n(0,o=Object.values(w))}else alert("Failed to fetch polls")}catch(f){console.error("Error fetching polls:",f),alert("An error occurred while fetching polls")}});async function s(){if(!i||r===null){alert("Please select a poll and option to vote on.");return}const f=i.options[r];(await fetch(`http://localhost:8080/users/${l}/votes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({option:f})})).ok?alert("Vote submitted successfully!"):alert("Failed to submit vote")}const a=[[]];function c(){i=Ue(this),n(1,i),n(0,o)}function u(){r=this.__value,n(2,r)}return t.$$set=f=>{"username"in f&&n(4,l=f.username)},[o,i,r,s,l,c,u,a]}class Qe extends Y{constructor(e){super(),X(this,e,Ke,ze,Q,{username:4})}}function me(t){let e,n;return e=new Ze({props:{onUserCreated:t[4]}}),{c(){le(e.$$.fragment)},m(l,o){G(e,l,o),n=!0},p:A,i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function ge(t){let e,n,l,o,i,r,s,a,c,u,f,w,v,b,_=t[2]&&be(),p=t[3]&&$e(t);return{c(){e=g("h2"),n=U("Welcome, "),l=U(t[0]),o=U("!"),i=O(),r=g("button"),r.textContent="Create a Poll",s=O(),a=g("button"),a.textContent="Vote on a Poll",c=O(),_&&_.c(),u=O(),p&&p.c(),f=we()},m(m,d){y(m,e,d),h(e,n),h(e,l),h(e,o),y(m,i,d),y(m,r,d),y(m,s,d),y(m,a,d),y(m,c,d),_&&_.m(m,d),y(m,u,d),p&&p.m(m,d),y(m,f,d),w=!0,v||(b=[N(r,"click",t[5]),N(a,"click",t[6])],v=!0)},p(m,d){(!w||d&1)&&W(l,m[0]),m[2]?_?d&4&&S(_,1):(_=be(),_.c(),S(_,1),_.m(u.parentNode,u)):_&&(z(),j(_,1,1,()=>{_=null}),K()),m[3]?p?(p.p(m,d),d&8&&S(p,1)):(p=$e(m),p.c(),S(p,1),p.m(f.parentNode,f)):p&&(z(),j(p,1,1,()=>{p=null}),K())},i(m){w||(S(_),S(p),w=!0)},o(m){j(_),j(p),w=!1},d(m){m&&($(e),$(i),$(r),$(s),$(a),$(c),$(u),$(f)),_&&_.d(m),p&&p.d(m),v=!1,T(b)}}}function be(t){let e,n;return e=new Je({}),{c(){le(e.$$.fragment)},m(l,o){G(e,l,o),n=!0},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function $e(t){let e,n;return e=new Qe({props:{username:t[0]}}),{c(){le(e.$$.fragment)},m(l,o){G(e,l,o),n=!0},p(l,o){const i={};o&1&&(i.username=l[0]),e.$set(i)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function We(t){let e,n,l,o=!t[1]&&me(t),i=t[1]&&ge(t);return{c(){e=g("main"),o&&o.c(),n=O(),i&&i.c()},m(r,s){y(r,e,s),o&&o.m(e,null),h(e,n),i&&i.m(e,null),l=!0},p(r,[s]){r[1]?o&&(z(),j(o,1,1,()=>{o=null}),K()):o?(o.p(r,s),s&2&&S(o,1)):(o=me(r),o.c(),S(o,1),o.m(e,n)),r[1]?i?(i.p(r,s),s&2&&S(i,1)):(i=ge(r),i.c(),S(i,1),i.m(e,null)):i&&(z(),j(i,1,1,()=>{i=null}),K())},i(r){l||(S(o),S(i),l=!0)},o(r){j(o),j(i),l=!1},d(r){r&&$(e),o&&o.d(),i&&i.d()}}}function Ge(t,e,n){let l="",o=!1,i=!1,r=!1;function s(u){n(0,l=u),n(1,o=!0)}function a(){n(2,i=!0),n(3,r=!1)}function c(){n(2,i=!1),n(3,r=!0)}return[l,o,i,r,s,a,c]}class He extends Y{constructor(e){super(),X(this,e,Ge,We,Q,{})}}new He({target:document.getElementById("app")});
